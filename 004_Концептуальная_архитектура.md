# Концептуальная архитектура

## Домены

|Домены|Назначение|Ключевые сущности|
|-----|-----|-----|
|**Core Domain**: Коммерция и продажи (eCommerce)|Генерация выручки от продажи экипировки и инвентаря. Каталог товаров, промо-правила, оформление и оплата заказа, возвраты, логистика|Товар, Акция, Заказ, Доставка|
|Персонализация и рекомендации|Next-Best-Action/Offer, персональные ленты и подборки промо-акций/товаров/новостей/челленджей|Модель подбора преложения, Маркетинговые кампании, Рекомендации, Сегмент|
|Сообщество и группы|Формирование списка друзей, групп, ведение лента сообщений, уведомления|Пользователь, Группа, Сообщение/Пост, Событие, Уведомление|
|Тренировки и телеметрия|Сбор и нормализация данных тренировок, метрики, лидерборды, сравнения|Тренировка, Метрика, Маршрут, Лидерборд|
|Управление экипировкой|Учет инвентаря, износ, подсказки на замену, связь с товарами|Экипировка, Пробег/Износ, Рекомендация замены|
|Региональные подразделения|Региональные акции, новости по интересам, таргетинг|Контент, Акция, Плейсмент, Правила таргетинга|
|Идентификация и приватность|Регистрация, получение согласия, управление приватностью профиля|Пользователь, Согласие, Сессия, Политика|
|Локализация и региональные правила|Хранение и применение данных по языкам, валютам, единицам измерения, юридическим ограничения|Регион, Язык, Валюта, Политика данных|

## Связи

|Домен|Домен|Тип связи|Обоснование|
|-----|-----|-----|-----|
|Тренировки и телеметрия|Персонализация и рекомендации|Conformist|Данные тренировок служат источником сигналов для персонализации. Персонализации используют модель данных тренировок как есть (Conformist), т.к. это основной источник данных об активности пользователя|
|Сообщество и группы|Персонализация и рекомендаци|Customer-Supplier|Данные о социальных связях и взаимодействиях повышают точность персонализации|
|Управление экипировкой|Персонализация и рекомендаци|Customer-Supplier|Информация об износе экипировки является критичным сигналом для подсказок и апсейла|
|Персонализация и рекомендации|Региональные подразделения|Partnership|Оба домена создают совместный результат-персонализированное предложение в нужный момент. Нужна координация, совместное развитие и эксперименты|
|Персонализация и рекомендации|Коммерция и продажи|Anticorruption Layer (ACL)|Домен персонализации подает персональные офферы в витрину, но Core Domain защищен от «шума» изменений. ACL преобразует события и команды в понятняе для e-commerce|
|Идентификация и приватность|Все домены|Shared Kernel|Общий сервис аутентификации и согласий, на который опираются все домены. Общие политики приватности и безопасности обязательны для всех|
|Локализация и региональные правила|Коммерция и продажи / Персонализация и рекомендации|Customer–Supplier|Домены продаж и промо используют правила регионализации (валюта, единицы измерения, законы)|


## Графическое представление








